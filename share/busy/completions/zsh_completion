#/usr/bin/env zsh

	sargparse_GetOpts () {
		completions=$(${(@q)words[@]:0:$CURRENT} --bash_completion)
		completions=(${(@f)completions})

		if [ "${completions}" = " -d " ]; then
			_files -/
		elif [ "${completions}" = " -f " ]; then
			_files
		elif [[ "${completions}" =~ " -f " ]]; then
			EXT="$(echo "${completions}" | cut -d ' ' -f 3)"
			_files -g "*${EXT}"
		else
			compadd -- ${completions[@]}
		fi
	}
	compdef sargparse_GetOpts -P busy -N
